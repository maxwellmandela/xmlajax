<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>upesi</title>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <link href="bootstrap.min.css" rel="stylesheet">
        <script src="bootstrap.min.js"></script>
        <script src="https://use.fontawesome.com/3277c51ba8.js"></script>
    </head>

    <style>
    #max{
        position: absolute;
        top: 0;
        margin-top: -1530px;
        left: 1%;
        height: 300px;
        width: 500px;
        z-index: 9999;
        background-color: blue;
    }
    </style>

    <body class="container">
        <div class="col-sm-6 col-sm-offset-3 jumbotron" style="margin-top:5%;">
        <select class="form-control" id="changecurrency">
            <option value="KES">Kenya</option>
            <option value="RWS">Rwanda</option>
            <option value="TZ">Tanzania</option>
            <option value="UGS">Uganda</option>
            <option value="USD">United States</option>
        </select>
        <h3 class="text text-center">1 USD = <span id="newrate">100.6 KES</span></h3>
        <div class="row">
            <div class="col-sm-6">
                <input type="text" class="form-control" id="email" placeholder="Enter Send Amount">
            </div>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="email" placeholder="Enter Receive Amount">
            </div>
        </div>
        <br>

        <!-- Trigger the modal with a button -->
        <div class="row">
            <div class="col-sm-6">
                <button type="button" class="btn btn-success btn-block" data-toggle="modal" data-target="#loginModal">Sign In</button>
            </div>
            <div class="col-sm-6">
                <button type="button" class="btn btn-warning btn-block" data-toggle="modal" data-target="#registerModal">Create Free Account</button>
            </div>
        </div>
        <br>

        <p>Transaction Tracker</p>
        <div class="row">
            <div class="col-sm-6">
                <input type="email" class="form-control" id="email" placeholder="Transaction Number">
            </div>
            <div class="col-sm-6">
                <button type="button" class="btn btn-warning btn-block">Track</button>
            </div>
        </div>

        <!--LOgin Modal -->
        <div id="loginModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Sign In</h4>
                <small>Sign in using your registered account:</small>
              </div>
              <div class="modal-body">
                <form class="form-horizontal" role="form">
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Email:</label>
                    <div class="col-sm-10">
                      <input type="email" class="form-control" id="email" placeholder="Enter email" autocomplete="off">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="pwd">Password:</label>
                    <div class="col-sm-10"> 
                      <input type="password" class="form-control" id="pwd" placeholder="Enter password" autocomplete="off">
                    </div>
                  </div>
                  <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10">
                      <div class="checkbox">
                        <label><input type="checkbox"> Remember me</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10">
                      <button type="submit" class="btn btn-warning">Submit</button>
                    </div>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              </div>
            </div>

          </div>
        </div>

        <!-- Register Modal -->
        <div id="registerModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Create Your Account</h4>
                <small>Create your free account:</small>
              </div>
              <div class="modal-body">
                <form class="form-horizontal" role="form" autocomplete="off">
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Name:</label>
                    <div class="col-sm-5">
                      <input type="text" class="form-control" id="email" placeholder="Enter first name">
                    </div>
                    <div class="col-sm-5">
                      <input type="text" class="form-control" id="email" placeholder="Enter last name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Address:</label>
                    <div class="col-sm-5">
                      <input type="text" class="form-control" id="email" placeholder="Enter Address">
                    </div>
                    <div class="col-sm-5">
                      <input type="text" class="form-control" id="email" placeholder="Enter Postcode">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Country:</label>
                    <div class="col-sm-5">
                      <select class="form-control" id="sel1">
                        <option value="100.6 KES">Kenya</option>
                        <option value="123 RWS">Rwanda</option>
                        <option value="234 TZ">Tanzania</option>
                        <option value="500 UGS">Uganda</option>
                        <option value="0.001 USD">United States</option>
                      </select>
                    </div>
                    <div class="col-sm-5">
                      <input type="text" class="form-control" id="email" placeholder="Enter City/Town">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Email:</label>
                    <div class="col-sm-10">
                      <input type="email" class="form-control" id="email" placeholder="Enter email">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="pwd">Password:</label>
                    <div class="col-sm-5"> 
                      <input type="password" class="form-control" id="pwd" placeholder="Enter password">
                    </div>
                    <div class="col-sm-5"> 
                      <input type="password" class="form-control" id="pwd" placeholder="Confirm password">
                    </div>
                  </div>
                  <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10">
                      <button type="submit" class="btn btn-inverse">Register</button>
                    </div>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              </div>
            </div>

          </div>
        </div>

        </div>
        <div class="row">
            <hrr>
            <div id="data"></div>
        </div>

        <script>
            $("#changecurrency").change(function(){
              //var url = "getExchangeRate.php";

              /*var tocur = "<ToCurrency>"+$("#changecurrency").val()+"</ToCurrency>";
              var cdata;
              cdata="\<\?xml version=\"1.0\" \?\>";
              cdata+="<GetExchangeRates>";
              cdata+="<FromCurrency>USD</FromCurrency>";
              cdata+=tocur;
              cdata+="</GetExchangeRates>";

              var options={};
              options.url=url;
              options.method="post";
              options.data=cdata;
              options.contentType="text/xml";

              $.ajax(options).done(function(data){
                  var clientid = $(data).find('d2p1:ExchangeRate');
                  $(clientid).each(function() {
                      $("#data").append($(this).find('d2p1:Rate').text()+', '
                        +$(this).find('d2p1:ToCurrency').text()+"<br>");
                  });
                  $("#newrate").html(data);
                  console.log(data);
              }).error(function(){
                  alert("error occured");
              });*/
              $.ajax({
                type: "GET",
                url: "getExchangeRate.php",
                success: function(xmlResponse) {
                  console.log(xmlResponse);
                  //var clientid = $(data).find('d2p1:ExchangeRate');
                  //$(clientid).each(function() {
                  //    $("#data").html($(this).find('d2p1:Rate').text());
                  //    console.log($("#data").html($(this).find('d2p1:Rate').text()));
                  //});
                  //$("#newrate").html(data);
                },
                error: function(){
                  alert("error processing");
                }
              });
            });

            $("#submit").click(function(event){
                event.preventDefault();
                //this.id = 'submitted';
                $("#submitted").html("please wait");
                var newbook =  "<Book><Title>"+$('#title').val()+"</Title><Author>"+$('#author').val()+"</Author></Book>";
            
                var cdata;
                cdata="\<\?xml version=\"1.0\" \?\>";
                cdata+="<Books>";
                cdata+="<Book><Title>Life of Pi</Title><Author>Yann Martel</Author></Book>";
                cdata+=newbook;
                cdata+="</Books>";

                var options={};
                options.url="server.php";
                options.method="post";
                options.data=cdata;
                options.contentType="text/xml";

                $.ajax(options).done(function(data){
                    //working
                    var clientid = $(data).find('Book');//.text();
                    //alert(clientid);
                    $(clientid).each(function() {
                        $("#data").append($(this).find('Title').text()+', '+$(this).find('Author').text()+"<br>");
                        //alert($(this).find('Title').text());
                    });

                    //response form server
                    console.log(data);
                    $("#submitted").html("Awsome!");

                    /*var clientid = $(data).find('movie');
                    $(clientid).each(function() {
                        $("#data").append($(this).find('title').text()+ '; Plot::'+$(this).find('plot').text()+'<br>');
                    });*/
                }).error(function(){
                    alert("error occured");
                });
            });
        </script>
    </body>
</html>